<div class="tab_wrapper" ng-class="{ 'has-error': category_error }">
  <h2 ng-show="categories.length">Categories</h2>
  <table class="table table-striped" ng-show="categories.length">
    <thead>
      <th>Title</th>
      <th>Description</th>
      <th>Tags</th>
    </thead>
    <tbody>
    <tr ng-repeat="category in categories" ng-click="activeCategory(category)">
      <td class="clickable">
        {{category.name}}
      </td>
      <td class="clickable">
        {{category.description}}
      </td>
      <td class="clickable">
        {{categoryTagNames(category)}}
      </td>
      <td class="clickable">
        <button class="btn btn-danger" ng-click="deleteCategory(category); $event.stopPropagation()">Delete</button>
      </td>
    </tr>
    </tbody>
  </table>
  <h3 ng-if="!editing_category">New Category</h3>
  <h3 ng-if="editing_category">Edit Category</h3>
  <form ng-submit="saveCategory(category)">
    <label for="category_name">Name:</label>
    <input ng-model="category.name" id="category_name" />
    <label for="category_description">Description:</label>
    <input ng-model="category.description" id="category_description" />
    <multiselect class="" multiple="true" change="selected()"
      ms-selected="{{categoryTagNames(category)}}"
      ng-model="category.tags" ms-header="Select Tags"
      options="tag._id as tag.name for tag in tags"></multiselect>
    <button type="submit" class="btn btn-primary">Submit</button>
    <button ng-if="editing_category" class="btn btn-warning" ng-click="revertCategory()">Discard Changes</button>
  </form>
  <div class="help-block" ng-if="category_error">{{category_error}}</div>
</div>  